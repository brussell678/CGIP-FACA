<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CGIP FAC Assistant Interface (BETA)</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400,700&display=swap" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@mui/material@5.14.6/dist/material.min.css" />
  <style>
	:root {
	--usmc-scarlet: #AF1E2D;
	--usmc-gold: #F2A900;
	--navy-900: #1e2a37;
	--bg: #f8f9fa;
	--text: #000;
	--border: #b0b0b0;
	--chat-bg: #f5f7fa;
	--user-text: #205081;
	--agent-text: #14532d;
	}
    .dark {
      --bg: #1a1a1a;
      --text: #f0f0f0;
      --border: #444;
      --chat-bg: #222;
      --user-text: #a0c4ff;
      --agent-text: #b2f2bb;
    }
    body {
      margin: 0;
      font-family: 'Roboto', Arial, sans-serif;
      background: var(--bg);
      color: var(--text);
    }
    .header {
      background: var(--navy-900);
      color: #fff;
      padding: 1rem 2rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .main-container {
      max-width: 900px;
      margin: 2rem auto;
      background: #fff; /* Override for light/dark if needed */
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.07);
      padding: 2rem;
    }
    .dark .main-container {
      background: #222;
    }
    .chat-history {
      max-height: 400px;
      overflow-y: auto;
      margin-bottom: 1.5rem;
      border: 1px solid var(--border);
      border-radius: 4px;
      padding: 1rem;
	  position: relative;
      background: var(--chat-bg);
    }
	.chat-history::after {
	content: "";
	position: absolute;
	inset: 0;
	background: url('usmc-logo.png') center/180px no-repeat;
	opacity: 0.06; /* faint watermark */
	pointer-events: none;
	}
    .chat-message { 
      white-space: pre-wrap; 
    }
    .chat-message.agent { white-space: pre-wrap; line-height: 1.4; }
    .chat-message.agent { margin-bottom: 1rem; }
    .chat-message.agent::first-line { font-variation-settings: 'wght' 500; }
    .chat-message {
      margin-bottom: 1rem;
    }
    .chat-message.user {
      text-align: right;
      color: var(--user-text);
    }
    .chat-message.agent {
      text-align: left;
      color: var(--agent-text);
    }
    .chat-input-area {
      display: flex;
      gap: 1rem;
      margin-top: 1rem;
    }
    .chat-input-area input, .chat-input-area textarea {
      flex: 1;
      padding: 0.75rem;
      border-radius: 4px;
      border: 1px solid var(--border);
      font-size: 1rem;
      resize: none;
      background: var(--bg);
      color: var(--text);
    }
    .chat-input-area button {
      padding: 0.75rem 1.5rem;
      background: var(--usmc-scarlet);
      color: #fff;
      border: none;
      border-radius: 4px;
      font-size: 1rem;
      font-weight: 700;
      cursor: pointer;
    }
    .chat-input-area button:hover {
      background: #8f1824;
    }
	.chat-input-area button:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      background: #ccc; /* Gray out for visual disable */
    }
    .thinking {
      color: #666;
      font-style: italic;
      text-align: center;
    }
    @media (max-width: 600px) {
      .main-container { padding: 1rem; }
      .header { flex-direction: column; gap: 0.5rem; padding: 1rem; }
    }
    /* New for #4: Suggestion buttons */
    .suggestion-btn {
      background: var(--usmc-gold);
      color: var(--navy-900);
      border: none;
      padding: 0.5rem 1rem;
      margin: 0.5rem 0.5rem 0 0;
      border-radius: 4px;
      cursor: pointer;
      font-size: 0.9rem;
    }
    .suggestion-btn:hover {
      background: #d99a00;
    }
    /* New for #5: Teaser style */
    #teaser {
      font-style: italic;
      color: #666;
      margin: 0.5rem 0 1rem 0;
      font-size: 0.9rem;
    }
  </style>
</head>
<body>
  <div class="header">
    <div>
      <img src="usmc-logo.png" alt="USMC" style="height:40px;vertical-align:middle;margin-right:1rem;">
      <span style="font-size:1.3rem;font-weight:700;">CGIP FAC Assistant (BETA)</span>
    </div>
    <button style="background:transparent;border:none;color:#fff;cursor:pointer;font-size:1rem;">Logout</button>
    <button onclick="toggleDark()" style="background:transparent;border:none;color:#fff;cursor:pointer;font-size:1rem;">ðŸŒ™ Dark Mode</button> <!-- #15: Toggle -->
  </div>
  <div class="main-container">
    <div class="filters" style="display:flex;gap:1rem;flex-wrap:wrap;margin-bottom:1rem;">
      <div style="flex:1;min-width:180px">
        <label for="tier-select" style="display:block;font-weight:700;margin-bottom:.25rem;">FAC Tier</label>
        <select id="tier-select" style="width:100%;padding:.5rem;border:1px solid #b0b0b0;border-radius:4px;">
          <option value="CoRE" selected>CoRE</option>
          <option value="CoRE+">CoRE+</option>
          <option value="Non-CoRE">Non-CoRE</option>
        </select>
      </div>
      <div style="flex:2;min-width:240px">
        <label for="fac-select" style="display:block;font-weight:700;margin-bottom:.25rem;">FAC</label>
        <select id="fac-select" style="width:100%;padding:.5rem;border:1px solid #b0b0b0;border-radius:4px;">
        </select>
      </div>
      <div style="flex:1;min-width:220px">
        <label for="coa-select" style="display:block;font-weight:700;margin-bottom:.25rem;">Persona</label>
        <select id="coa-select" style="width:100%;padding:.5rem;border:1px solid #b0b0b0;border-radius:4px;">
        </select>
      </div>
    </div>
    <div id="teaser"></div> <!-- #5: Dynamic Persona Teaser -->
    <div class="chat-history" id="chat-history"></div>
    <form class="chat-input-area" id="chat-form" autocomplete="off">
      <textarea id="user-input" rows="2" placeholder="Type your question for the Assistant..." required></textarea>
      <button type="submit">Send</button>
    </form>
  </div>
  <script src="script.js"></script>
  <div id="igmc-footer" style="max-width:900px;margin:1rem auto 2rem auto;color:#556; font-size:.9rem; text-align:center;">
    <em>Loading IGMC FAC site statusâ€¦</em>
  </div>

</body>
</html>
